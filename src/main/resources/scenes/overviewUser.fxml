<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<ScrollPane fitToHeight="true" fitToWidth="true"
            style="-fx-background-color: white;"
            xmlns:fx="http://javafx.com/fxml/1"
            xmlns="http://javafx.com/javafx/17.0.12"
            fx:controller="com.college.controller.OverviewController">

    <AnchorPane style="-fx-padding: 20; -fx-background-color: white;">
        <VBox alignment="TOP_CENTER" spacing="40"
              style="-fx-background-color: white;"
              AnchorPane.leftAnchor="0"
              AnchorPane.rightAnchor="0"
              AnchorPane.topAnchor="0"
              AnchorPane.bottomAnchor="0">

            <!-- Header -->
            <Label text="User Dashboard Overview"
                   style="-fx-font-size: 28px;
                          -fx-font-weight: bold;
                          -fx-text-fill: linear-gradient(to bottom, #36454F, #707880);" />

            <!-- Top Row: Responsive Statistic Cards -->
            <FlowPane alignment="CENTER" hgap="20" vgap="20" prefWrapLength="800">

                <!-- Email Card -->
                <VBox alignment="CENTER" spacing="10">
                    <VBox styleClass="card-box"
                          style="-fx-background-color: linear-gradient(to bottom, #36454F, #707880);
                                 -fx-background-radius: 12;
                                 -fx-alignment: center;
                                 -fx-padding: 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0, 0, 2);"
                          minWidth="200" prefWidth="250" maxWidth="300">
                        <Label text="ðŸ‘¥" style="-fx-font-size: 30px; -fx-text-fill: white;" />
                        <Label text="Email"
                               style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" />
                        <Label fx:id="userEmailLabel"
                               onMouseClicked="#updateEmail"
                               text="johnDoe@gmail.com"
                               wrapText="true" textAlignment="CENTER"
                               style="-fx-text-fill: white;
                                      -fx-font-size: 28px;
                                      -fx-font-weight: bold;" />
                    </VBox>
                </VBox>

                <!-- Name Card -->
                <VBox alignment="CENTER" spacing="10">
                    <VBox styleClass="card-box"
                          style="-fx-background-color: linear-gradient(to bottom, #36454F, #707880);
                                 -fx-background-radius: 12;
                                 -fx-alignment: center;
                                 -fx-padding: 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0, 0, 2);"
                          minWidth="200" prefWidth="250" maxWidth="300">
                        <Label text="ðŸ’°" style="-fx-font-size: 30px; -fx-text-fill: white;" />
                        <Label text="Name"
                               style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" />
                        <Label fx:id="nameLabel"
                               onMouseClicked="#updateName"
                               text="John Doe"
                               wrapText="true" textAlignment="CENTER"
                               style="-fx-text-fill: white;
                                      -fx-font-size: 28px;
                                      -fx-font-weight: bold;" />
                    </VBox>
                </VBox>

                <!-- Role Card -->
                <VBox alignment="CENTER" spacing="10">
                    <VBox styleClass="card-box"
                          style="-fx-background-color: linear-gradient(to bottom, #36454F, #707880);
                                 -fx-background-radius: 12;
                                 -fx-alignment: center;
                                 -fx-padding: 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0, 0, 2);"
                          minWidth="200" prefWidth="250" maxWidth="300">
                        <Label text="ðŸ“Š" style="-fx-font-size: 30px; -fx-text-fill: white;" />
                        <Label text="Role"
                               style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" />
                        <Label fx:id="roleLabel"
                               text="Administrator"
                               wrapText="true" textAlignment="CENTER"
                               style="-fx-text-fill: white;
                                      -fx-font-size: 28px;
                                      -fx-font-weight: bold;" />
                    </VBox>
                </VBox>

            </FlowPane>

            <!-- Buttons Row -->
            <HBox alignment="CENTER" spacing="10">
                <Button text="Upload Image"
                        fx:id="uploadImageButton"
                        onAction="#handleUploadImage"
                        style="-fx-background-color: linear-gradient(to bottom, #36454F, #707880);
                               -fx-text-fill: white;
                               -fx-background-radius: 10;"
                        prefWidth="220" prefHeight="35" />

                <ToggleButton fx:id="themeToggleButton"
                              text="Dark Mode"
                              onAction="#toggleTheme"
                              style="-fx-background-color: linear-gradient(to bottom, #36454F, #707880);
                                     -fx-text-fill: white;
                                     -fx-font-weight: bold;
                                     -fx-font-size: 14px;
                                     -fx-background-radius: 5;
                                     -fx-padding: 8 20 8 20;
                                     -fx-cursor: hand;"
                              prefWidth="150" prefHeight="35" />
            </HBox>

            <!-- Shift Hours Chart -->
            <HBox alignment="CENTER" spacing="30">
                <VBox styleClass="chart-box">
                    <BarChart fx:id="shiftHoursChart" prefHeight="250" prefWidth="400" title="Shift Hours">
                        <xAxis>
                            <CategoryAxis label="Employee" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Hours Worked" />
                        </yAxis>
                    </BarChart>
                </VBox>
            </HBox>

            <!-- Clock -->
            <HBox fx:id="clockBox"
                  styleClass="clock-box"
                  alignment="CENTER"
                  spacing="10"
                  style="-fx-background-color: linear-gradient(to bottom, #36454F, #707880);
                         -fx-background-radius: 12;
                         -fx-padding: 10;"
                  prefWidth="200" minWidth="200" maxWidth="400"
                  AnchorPane.topAnchor="20" AnchorPane.rightAnchor="20">

                <Label text="â°" style="-fx-font-size: 24px;" />
                <Label fx:id="clockLabel"
                       style="-fx-font-size: 16px;
                              -fx-font-weight: bold;
                              -fx-text-fill: white;" />
            </HBox>

            <!-- Hidden Charts and Labels (keep for controller bindings) -->
            <HBox alignment="CENTER" spacing="30">
                <VBox visible="false">
                    <BarChart fx:id="totalGuestsChart" prefHeight="250" prefWidth="300" title="Total Guests">
                        <xAxis><CategoryAxis label="Month"/></xAxis>
                        <yAxis><NumberAxis label="Number of Guests"/></yAxis>
                    </BarChart>
                </VBox>

                <VBox visible="false">
                    <BarChart fx:id="revenueBarChart" prefHeight="250" prefWidth="300" title="Revenue">
                        <xAxis><CategoryAxis label="Month"/></xAxis>
                        <yAxis><NumberAxis label="Revenue (R)"/></yAxis>
                    </BarChart>
                </VBox>

                <VBox visible="false">
                    <PieChart fx:id="occupancyPieChart" prefHeight="250" prefWidth="300" title="Occupancy Breakdown"/>
                </VBox>
            </HBox>

            <PieChart visible="false" fx:id="totalEmployeesPieChart" title="Total Employees" prefHeight="300" prefWidth="450"/>
            <PieChart visible="false" fx:id="reservationsPieChart" title="Reservations" prefHeight="300" prefWidth="350"/>
            <Label fx:id="currentGuestsLabel" text="0" visible="false"/>

            <BarChart fx:id="monthlyEarningsBarChart" title="Total Revenue" prefHeight="400" prefWidth="750" visible="false">
                <xAxis><CategoryAxis fx:id="monthsAxis" label="Month"/></xAxis>
                <yAxis><NumberAxis fx:id="earningsAxis" label="Earnings (k)"/></yAxis>
            </BarChart>
        </VBox>
    </AnchorPane>
</ScrollPane>
