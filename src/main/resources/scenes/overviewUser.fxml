<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<ScrollPane fitToHeight="true" fitToWidth="true" style="-fx-background-color: white;
 -fx-background-color: white;" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/17.0.12"
            fx:controller="com.college.controller.OverviewController">

    <AnchorPane style="-fx-padding: 20; -fx-background-color: white;">
        <VBox alignment="CENTER" spacing="40" style="-fx-background-color: white;" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">

            <!-- Header -->
            <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #E67E22;" text="Dashboard Overview" />


            <!-- clock -->
            <HBox fx:id="clockBox" alignment="CENTER" spacing="10"
                  style="-fx-background-color: #808080; -fx-background-radius: 12; -fx-padding: 10; "  prefWidth="200" minWidth="200" maxWidth="400"
                  AnchorPane.topAnchor="20" AnchorPane.rightAnchor="20">

                <!-- Clock icon -->
                <Label text="⏰" style="-fx-font-size: 24px;" />

                <!-- Time & Date -->
                <Label fx:id="clockLabel" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;" />

            </HBox>


            <!-- Top Row: 3 Statistic Blocks -->
            <HBox alignment="CENTER" spacing="30">

                <!-- Total Guests -->
                <VBox alignment="CENTER" spacing="10">
                    <VBox styleClass="card-box" style=" -fx-background-color: linear-gradient(from 0% 0% to 100% 100%,
                    rgba(220, 220, 220, 0.3),   /* lighter grey */
                    rgba(128, 128, 128, 0.9)    /* main grey */);
                    -fx-background-radius: 12; -fx-alignment: center"  prefWidth="220" prefHeight="180" minWidth="220" minHeight="180" >

                        <Label style="-fx-font-size: 30px; -fx-text-fill: white;" text="👥" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" text="Email" />
                        <Label fx:id="userEmailLabel" onMouseClicked="#updateEmail" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="johnDoe@gmail.com" />

                    </VBox>
                </VBox>

                <!-- Total Revenue -->
                <VBox alignment="CENTER" spacing="10">
                    <VBox styleClass="card-box" style=" -fx-background-color: linear-gradient(from 0% 0% to 100% 100%,
                    rgba(220, 220, 220, 0.3),   /* lighter grey */
                    rgba(128, 128, 128, 0.9)    /* main grey */);
                    -fx-background-radius: 12; -fx-alignment: center"  prefWidth="220" prefHeight="180" minWidth="220" minHeight="180">
                        <Label style="-fx-font-size: 30px; -fx-text-fill: white;" text="💰" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" text="Name" />
                        <Label fx:id="nameLabel" onMouseClicked="#updateName"  style="-fx-text-fill: white;  -fx-font-size: 32px; -fx-font-weight: bold;"  text="johnDoe" />
                    </VBox>
                </VBox>

                <!-- Occupancy Rate -->
                <VBox alignment="CENTER" spacing="10">
                    <VBox styleClass="card-box" style=" -fx-background-color: linear-gradient(from 0% 0% to 100% 100%,
                    rgba(220, 220, 220, 0.3),   /* lighter grey */
                    rgba(128, 128, 128, 0.9)    /* main grey */);
                    -fx-background-radius: 12;  -fx-alignment: center"  prefWidth="220" prefHeight="180" minWidth="220" minHeight="180">
                        <Label style="-fx-font-size: 30px; -fx-text-fill: white;" text="📊" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" text="Role" />
                        <Label fx:id="roleLabel" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="role" />
                    </VBox>
                </VBox>
            </HBox>

            <HBox alignment="CENTER" spacing="10">
                <Button text="Upload Image" fx:id="uploadImageButton"
                        onAction="#handleUploadImage"
                        style="-fx-background-color: #45b6fe; -fx-text-fill: white; -fx-background-radius: 10;"
                        prefWidth="220" prefHeight="35"/>

                <ToggleButton fx:id="themeToggleButton" text="Dark Mode" onAction="#toggleTheme"/>

            </HBox>



            <!-- Bottom Row: Shift Hours Chart -->
            <HBox alignment="CENTER" spacing="30">
                <VBox style="-fx-background-color: #ffffff;
                 -fx-border-color: #808080;
                 -fx-border-width: 2;
                 -fx-border-radius: 15;
                 -fx-background-radius: 15;
                 -fx-padding: 10;">
                    <BarChart fx:id="shiftHoursChart" prefHeight="250" prefWidth="400" title="Shift Hours">
                        <xAxis>
                            <CategoryAxis label="Employee" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Hours Worked" />
                        </yAxis>
                    </BarChart>
                </VBox>
            </HBox>











            <!-- Bottom Row: 3 Charts HIDDEN! deleting causes errors in overview controller, DO NOT DELETE THESE 3 they are hidden! -->
            <HBox alignment="CENTER" spacing="30">
                <!-- Total Guests Chart -->
                <VBox visible="false" style="-fx-background-color: #ffffff; -fx-border-color: #27ae60; -fx-border-width: 2; -fx-border-radius: 15; -fx-background-radius: 15; -fx-padding: 10;">
                    <BarChart fx:id="totalGuestsChart" prefHeight="250" prefWidth="300" title="Total Guests">
                        <xAxis>
                            <CategoryAxis label="Month" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Number of Guests" />
                        </yAxis>
                    </BarChart>
                </VBox>

                <!-- Revenue Chart -->
                <VBox visible="false" style="-fx-background-color: #ffffff; -fx-border-color: #27ae60; -fx-border-width: 2; -fx-border-radius: 15; -fx-background-radius: 15; -fx-padding: 10;">
                    <BarChart fx:id="revenueBarChart" prefHeight="250" prefWidth="300" title="Revenue">
                        <xAxis>
                            <CategoryAxis label="Month" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Revenue (R)" />
                        </yAxis>
                    </BarChart>
                </VBox>

                <!-- Occupancy Chart -->
                <VBox visible="false" style="-fx-background-color: #ffffff; -fx-border-color: #27ae60; -fx-border-width: 2; -fx-border-radius: 15; -fx-background-radius: 15; -fx-padding: 10;">
                    <PieChart fx:id="occupancyPieChart" prefHeight="250" prefWidth="300" title="Occupancy Breakdown" />
                </VBox>
            </HBox>


            <!-- this is hidden and fixes guest label null when calling user, this relates to dashboard admin they both use overview controller-->
            <!-- they all use same controller, so must have same fxids otherwise u get null errors-->
            <PieChart visible="false" fx:id="totalEmployeesPieChart" title="Total Employees" prefHeight="300" prefWidth="450"/>

            <PieChart visible="false" fx:id="reservationsPieChart" title="Reservations" prefHeight="300" prefWidth="350"/>

            <!-- this is hidden and fixes guest label null when calling user, this relates to dashboard admin they both use overview controller-->
            <Label fx:id="currentGuestsLabel" layoutX="100" layoutY="50" text="0" visible="false"/>

            <BarChart fx:id="monthlyEarningsBarChart" title="Total Revenue" prefHeight="400" prefWidth="750" visible="false">
                <xAxis>
                    <CategoryAxis fx:id="monthsAxis" label="Month"/>
                </xAxis>
                <yAxis>
                    <NumberAxis fx:id="earningsAxis" label="Earnings (k)"/>
                </yAxis>
            </BarChart>

        </VBox>
    </AnchorPane>
</ScrollPane>
